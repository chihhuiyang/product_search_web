{"version":3,"sources":["star-rating.es6"],"names":[],"mappings":"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","file":"star-rating.js","sourcesContent":["'use strict';\n\nconst currentScript = document._currentScript || document.currentScript;\nconst doc = currentScript.ownerDocument;\n\nclass StarRating extends HTMLElement {\n  createdCallback() {\n    const template = doc.querySelector('template');\n    const clone = document.importNode(template.content, true);\n\n    this.createShadowRoot();\n    this.shadowRoot.appendChild(clone);\n\n    this._createStars().forEach((star) => {\n      this.shadowRoot.appendChild(star);\n    });\n\n    this._colorStars();\n  }\n\n  attributeChangedCallback(name, from, to) {\n    if (name === 'max') {\n      throw new Error('The maximum value can\\'t be changed.');\n    }\n    else if (name === 'value') {\n      this._colorStars();\n    }\n  }\n\n  get value() {\n    const v = parseFloat(this.getAttribute('value') || 0);\n    if (!(v >= 0)) {\n      return 0;\n    }\n    return v;\n  }\n\n  set value(v) {\n    if (!(parseFloat(v) >= 0)) {\n      throw new Error('Value must be a number larger or equal to 0.');\n    }\n\n    this.setAttribute('value', v);\n  }\n\n  get max() {\n    return parseInt(this.getAttribute('max') || 5);\n  }\n\n  set max(v) {\n    throw new Error('The maximum value can\\'t be changed.');\n  }\n\n  get _stars() {\n    return Array.from(this.shadowRoot.childNodes)\n      .filter((node) => node.nodeName.toLowerCase() === 'span');\n  }\n\n  _createStars() {\n    const stars = [];\n\n    for (let i = 0; i < this.max; i++) {\n      const star = document.createElement('span');\n      star.innerHTML = '&#x2605;';\n      stars.push(star);\n\n      const innerStar = document.createElement('span');\n      innerStar.innerHTML = '&#x2605;';\n      star.appendChild(innerStar);\n    }\n\n    return stars;\n  }\n\n  _colorStars() {\n    const value = this.value;\n    let p;\n\n    for (var i = 0; i < this.max; i++) {\n      const star = this._stars[i];\n      const innerStar = star.children[0];\n\n      if (i + 1 <= value) {\n        innerStar.style.width = '100%';\n      }\n      else {\n        innerStar.style.width = 0;\n      }\n\n      p = value - i;\n\n      if (p > 0 && p < 1) {\n        innerStar.style.width = p * 100 + '%';\n      }\n    }\n  }\n}\n\n\nwindow.StarRatingElement = document.registerElement('star-rating', StarRating);\n"],"sourceRoot":"/source/"}